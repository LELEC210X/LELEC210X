import pytest

from .utils import payload_to_melvecs

PAYLOAD_16_20 = "000a000d00150006000000010001000000000000000000000000000000000000000800190040001e00030009000a0004000000000000000000000000000000000005000f004e001d000300060009000500010000000000000000000000000000000900190033002700050008000b000300000000000000000000000000000000000a00170043002d0007000e000a000b00050001000000000000000000000000000c000e00230027000500060004000400090007000100020000000000000001000d00130038002e000600060001000100020005000300000000000000000000000800180020000b000100010001000000000000000300010000000000000000000b0017004a00220002000600020000000100000001000100000000000000000006000200010001000000000000000000010000000000000000000000000000000600020002000100000000000000000000000000000000000000000000000000060015003b0028000400060003000100000000000100010001000100000000000b0024002200380020001200110017000b000f000c000700050004000400000004000c003f0010000200020001000000000001000000000000000100000000000700090023002f0024001700070004000600030002000300020003000200030005001400310022000f000a00030000000300050004000600020002000100000006000b000f000d000200000000000000000000000100010000000000000000000b00040001000100000000000000000000000000000000000000000000000000050004000100010000000000000000000000020001000200000000000000000005000300010000000000000000000100010002000000000000000000000000"

PAYLOAD_20_20 = "00060003000500030000000000000000000000000000000000000000000000000000000000000000000c0017001d0016000600020000000100010001000100030002000000000000000000000000000000090011002600140001000000000000000000000000000000000000000000000000000000000000000600090006000200000000000000000000000000000000000000000000000000000000000000000004000200000000000100000000000000000000000000000000000000000000000000000000000000020002000100000000000000000000000000000000000000000000000000000000000000000000000d0015001300070005000d0019000a0003000000000002000500070009000b000200000000000000070013000d0009000c000c002b0018000a00050001000300060011001c00170006000300040004000e002f00170008001d002400150009001d00130005000900060004000300040001000000000000000b00110010000e000200020001000000010000000000000000000000000000000000000000000000080007000300020000000100000000000100010000000000000000000100000000000000000000000300030002000100020000000000000002000100000000000000000000000000000000000000000009000c000800070002000200010002000100000000000000000000000000000000000000000000000d0016000f000c0004000200010002000200000000000000000000000000000000000000000000000f000c000800080002000000020002000200000000000000000000000000000000000000000000000b000e001a00250008000100020001000000010001000000000000000000000000000000000000000b000d000a0019000b0002000200040001000300000000000000000000000000000000000000000008000b000c0017000d00040005000d000a000400000000000000000000000000000000000000000004000800120013001b000700050009000f00070000000000000000000000000000000000000000001200220016000c000c000d000d000a0008000b0000000000010000000000010000000000000000"


@pytest.mark.parametrize(
    ("payload", "melvec_length", "n_melvecs"),
    [
        (PAYLOAD_16_20, 16, 20),
        (PAYLOAD_20_20, 20, 20),
    ],
    ids=("16x20", "20x20"),
)
def test_payload_to_melvecs(payload, melvec_length, n_melvecs):
    melvecs = payload_to_melvecs(payload, melvec_length, n_melvecs)

    assert melvecs.shape == (melvec_length, n_melvecs)
